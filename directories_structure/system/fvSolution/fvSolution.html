<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>fvSolution - OpenFoam® Handbook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../../preface.html"><strong aria-hidden="true">1.</strong> Preface</a></li><li class="chapter-item expanded "><a href="../../../intro/index.html"><strong aria-hidden="true">2.</strong> Intro</a></li><li class="chapter-item expanded "><a href="../../../installation/index.html"><strong aria-hidden="true">3.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../installation/via_package_manager.html"><strong aria-hidden="true">3.1.</strong> Package manager</a></li><li class="chapter-item expanded "><a href="../../../installation/download_binaries.html"><strong aria-hidden="true">3.2.</strong> Precompiled binaries</a></li><li class="chapter-item expanded "><a href="../../../installation/compiling_src_code.html"><strong aria-hidden="true">3.3.</strong> Compiling source code</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../installation/compile_function_objects.html"><strong aria-hidden="true">3.3.1.</strong> Compiling function objects</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../problem_set_up/index.html"><strong aria-hidden="true">4.</strong> Problem set up</a></li><li class="chapter-item expanded "><a href="../../../automation/index.html"><strong aria-hidden="true">5.</strong> Automation </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../automation/run-commands-in-sequence.html"><strong aria-hidden="true">5.1.</strong> Run commands in sequence</a></li><li class="chapter-item expanded "><a href="../../../automation/create-a-custom-command.html"><strong aria-hidden="true">5.2.</strong> Create a custom command</a></li><li class="chapter-item expanded "><a href="../../../automation/bash-script.html"><strong aria-hidden="true">5.3.</strong> Shell scripting</a></li></ol></li><li class="chapter-item expanded "><a href="../../../useful_command/index.html"><strong aria-hidden="true">6.</strong> Useful commands</a></li><li class="chapter-item expanded "><a href="../../../mesh/index.html"><strong aria-hidden="true">7.</strong> Mesh</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../mesh/blockmesh.html"><strong aria-hidden="true">7.1.</strong> blockMesh</a></li><li class="chapter-item expanded "><a href="../../../mesh/snappyhexmesh/index.html"><strong aria-hidden="true">7.2.</strong> snappyHexMesh</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../mesh/snappyhexmesh/advice-for-internal-flow.html"><strong aria-hidden="true">7.2.1.</strong> Internal flow</a></li><li class="chapter-item expanded "><a href="../../../mesh/snappyhexmesh/setting-zones-inside-the-mesh-for-source-terms.html"><strong aria-hidden="true">7.2.2.</strong> Setting zones</a></li><li class="chapter-item expanded "><a href="../../../mesh/snappyhexmesh/multiple_regions.html"><strong aria-hidden="true">7.2.3.</strong> Multiple regions</a></li><li class="chapter-item expanded "><a href="../../../mesh/snappyhexmesh/advanced-refinement-technique.html"><strong aria-hidden="true">7.2.4.</strong> Refinement technique</a></li></ol></li><li class="chapter-item expanded "><a href="../../../mesh/cfmesh.html"><strong aria-hidden="true">7.3.</strong> cfMesh </a></li><li class="chapter-item expanded "><a href="../../../mesh/checkMesh.html"><strong aria-hidden="true">7.4.</strong> checkMesh</a></li><li class="chapter-item expanded "><a href="../../../mesh/ansys-meshing-to-openfoam.html"><strong aria-hidden="true">7.5.</strong> ANSYS Meshing to OpenFoam® </a></li></ol></li><li class="chapter-item expanded "><a href="../../../directories_structure/index.html"><strong aria-hidden="true">8.</strong> Directories’ structure</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../directories_structure/0/index.html"><strong aria-hidden="true">8.1.</strong> 0</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../directories_structure/0/ε-ω-k/index.html"><strong aria-hidden="true">8.1.1.</strong> ε, ω, k</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/0/nut/index.html"><strong aria-hidden="true">8.1.2.</strong> nut</a></li></ol></li><li class="chapter-item expanded "><a href="../../../directories_structure/constant/index.html"><strong aria-hidden="true">8.2.</strong> Constant</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../directories_structure/constant/transportProperties.html"><strong aria-hidden="true">8.2.1.</strong> transportProperties</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/constant/turbulentProperties.html"><strong aria-hidden="true">8.2.2.</strong> turbulentProperties</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/constant/polyMesh.html"><strong aria-hidden="true">8.2.3.</strong> polyMesh</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/constant/thermophysicalProperties.html"><strong aria-hidden="true">8.2.4.</strong> thermophysicalProperties</a></li></ol></li><li class="chapter-item expanded "><a href="../../../directories_structure/system/index.html"><strong aria-hidden="true">8.3.</strong> System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../directories_structure/system/controldict.html"><strong aria-hidden="true">8.3.1.</strong> controlDict</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/system/fvSchemes.html"><strong aria-hidden="true">8.3.2.</strong> fvSchemes</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/system/fvSolution/fvSolution.html" class="active"><strong aria-hidden="true">8.3.3.</strong> fvSolution</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/system/decomposepardict.html"><strong aria-hidden="true">8.3.4.</strong> decomposeParDict</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/system/fvOptions.html"><strong aria-hidden="true">8.3.5.</strong> fvOptions</a></li><li class="chapter-item expanded "><a href="../../../directories_structure/system/topoSetDict.html"><strong aria-hidden="true">8.3.6.</strong> topoSetDict</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../problem-initialization-and-interpolation-from-previous-results/index.html"><strong aria-hidden="true">9.</strong> Problem initialization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../problem-initialization-and-interpolation-from-previous-results/modularity.html"><strong aria-hidden="true">9.1.</strong> Modularity</a></li></ol></li><li class="chapter-item expanded "><a href="../../../browse-source-code/index.html"><strong aria-hidden="true">10.</strong> Browse Source Code</a></li><li class="chapter-item expanded "><a href="../../../run-in-parallel/index.html"><strong aria-hidden="true">11.</strong> Parallel execution</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../run-in-parallel/MPI.html"><strong aria-hidden="true">11.1.</strong> MPI (Message Passage Interface)</a></li><li class="chapter-item expanded "><a href="../../../run-in-parallel/cluster_practice.html"><strong aria-hidden="true">11.2.</strong> Cluster practices</a></li></ol></li><li class="chapter-item expanded "><a href="../../../compressible-model/compressible-model.html"><strong aria-hidden="true">12.</strong> Compressibility model</a></li><li class="chapter-item expanded "><a href="../../../multiphase-model/index.html"><strong aria-hidden="true">13.</strong> Multiphase model</a></li><li class="chapter-item expanded "><a href="../../../conjugate-heat-transfer-model/index.html"><strong aria-hidden="true">14.</strong> Conjugate Heat Transfer Model</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../conjugate-heat-transfer-model/automation_for_initial_condition.html"><strong aria-hidden="true">14.1.</strong> Boundary condition automation</a></li><li class="chapter-item expanded "><a href="../../../conjugate-heat-transfer-model/not_resolving_fluid_part.html"><strong aria-hidden="true">14.2.</strong> Fluid decoupling</a></li></ol></li><li class="chapter-item expanded "><a href="../../../residuals/index.html"><strong aria-hidden="true">15.</strong> Residuals</a></li><li class="chapter-item expanded "><a href="../../../paraview/paraview.html"><strong aria-hidden="true">16.</strong> ParaView</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../paraview/pvserver.html"><strong aria-hidden="true">16.1.</strong> Remote rendering</a></li><li class="chapter-item expanded "><a href="../../../paraview/compilation.html"><strong aria-hidden="true">16.2.</strong> Compilation</a></li><li class="chapter-item expanded "><a href="../../../paraview/visualization_different_meshes.html"><strong aria-hidden="true">16.3.</strong> Different meshes</a></li></ol></li><li class="chapter-item expanded "><a href="../../../post-processing-via-command-line/index.html"><strong aria-hidden="true">17.</strong> CLI Post-processing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../post-processing-via-command-line/function_object.html"><strong aria-hidden="true">17.1.</strong> Function objects</a></li></ol></li><li class="chapter-item expanded "><a href="../../../PETSc/index.html"><strong aria-hidden="true">18.</strong> External library for computation</a></li><li class="chapter-item expanded "><a href="../../../tools/index.html"><strong aria-hidden="true">19.</strong> Editing tools</a></li><li class="chapter-item expanded "><a href="../../../virtualization/index.html"><strong aria-hidden="true">20.</strong> Virtualization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../virtualization/WSL.html"><strong aria-hidden="true">20.1.</strong> Windows Subsystem for Linux</a></li><li class="chapter-item expanded "><a href="../../../virtualization/multipass.html"><strong aria-hidden="true">20.2.</strong> Multipass</a></li><li class="chapter-item expanded "><a href="../../../virtualization/docker.html"><strong aria-hidden="true">20.3.</strong> Docker</a></li><li class="chapter-item expanded "><a href="../../../virtualization/docker-compose.html"><strong aria-hidden="true">20.4.</strong> Docker compose</a></li></ol></li><li class="chapter-item expanded "><a href="../../../math_formulation/index.html"><strong aria-hidden="true">21.</strong> Navier Stokes equations </a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OpenFoam® Handbook</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Adige-Calculations/OpenFOAM-handbook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/Adige-Calculations/OpenFOAM-handbook/tree/main/src/directories_structure/system/fvSolution/fvSolution.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="fvsolution"><a class="header" href="#fvsolution">fvSolution</a></h1>
<p>The dictionary is divided in 3 parts:</p>
<ul>
<li>linear-solver</li>
<li>solver</li>
<li>under-relaxation factor</li>
</ul>
<h2 id="linear-solver-control"><a class="header" href="#linear-solver-control">Linear solver control</a></h2>
<p>Linear solvers are a sets of algorithms to solve the following linear problems in matrix form:</p>
<p>\begin{equation}
\tag{1}
Ax=b
\end{equation}</p>
<p>The solver is said to have found a solution if any one of the following conditions are reached:</p>
<ul>
<li>
<p><code>tolerance</code> Define the exit criterion for the solver, it is the
absolute difference between 2 consecutive iterations and must be low
in steady state while coarser in transient simulation</p>
</li>
<li>
<p><code>relTol</code> Define the exit criterion for the solver, on a relative
difference of solution from 2 consecutive iteration (i.e. 0.1 is
10%)</p>
</li>
<li>
<p><code>maxIter</code> A maximum number of iterations at which the solver is
stopped anyway 1000 as default</p>
</li>
</ul>
<blockquote>
<blockquote>
<p>The solvers controls can be modified on the fly (when a simulation is running).</p>
</blockquote>
</blockquote>
<h3 id="diagonal-solver"><a class="header" href="#diagonal-solver">Diagonal solver</a></h3>
<p>If the matix coefficients have non-zeros values on its diagonal, therefore a set of explicit equations. The solution vector can be
obtained inverting the stiffness matrix without incurring in relevant computational effort:</p>
<ul>
<li><code>diagonal</code>: a diagonal solver for explicit systems.</li>
</ul>
<p>where:</p>
<p>\begin{equation}
\tag{2}
x = A^{-1}b
\end{equation}</p>
<p>Where the inverse of the diagonal matrix is simply:</p>
<p>\begin{equation}
\tag{2}
A^{-1}= \frac{1}{diagonal(A)}
\end{equation}</p>
<h3 id="direct-solvers"><a class="header" href="#direct-solvers">Direct solvers</a></h3>
<p>The following algoritms are direct methods, or method based on Gaussian elimination:</p>
<ul>
<li><code>smoothSolver</code>: Solver that uses a smoother.</li>
</ul>
<p>The solvers that use a smoother require the choice of smoother to be specified as follow</p>
<ul>
<li><code>GaussSeidel</code> Gauss-Seidel.</li>
<li><code>symGaussSeidel</code> symmetric Gauss-Seidel.</li>
<li><code>DIC/DILU</code> incomplete-Cholesky (symmetric), incomplete-LU (asymmetric).</li>
<li><code>DICGaussSeidel</code> diagonal incomplete-Cholesky/LU with Gauss-Seidel (symmetric/asymmetric).</li>
</ul>
<p>When using the smooth solvers, the user can optionally specify the number of sweeps, by the <code>nSweeps</code>
keyword, before the residual is recalculated. Without setting it, it reverts to a default value of 1.</p>
<p>The usage is reported below:</p>
<pre><code class="language-sh">solver          smooth;
smoother        &lt;smoother&gt;;
relTol          &lt;relative tolerance&gt;;
tolerance       &lt;absolute tolerance&gt;;
</code></pre>
<h3 id="iterative-solver-minimization-algorithms"><a class="header" href="#iterative-solver-minimization-algorithms">Iterative solver (Minimization algorithms)</a></h3>
<p>They are solver that start from a guess and they iteratively correct up to the respect
of the equations of the system:</p>
<ul>
<li><code>PCG</code>/<code>PBiCG</code>: Preconditioned (bi-)Conjugate Gradient, with PCG for symmetric matrices, PBiCG for asymmetric matrices.</li>
<li><code>PBiCGStab</code>: Stabilised preconditioned (bi-)conjugate gradient, for both symmetric and asymmetric matrices.</li>
<li><code>GAMG</code>: Generalised Geometric-Algebraic Multi-Grid.</li>
</ul>
<p>The <code>GAMG</code> solver can often be the optimal choice for solving the pressure equation.</p>
<blockquote>
<p>Preconditioners are useful in iterative methods to solve a linear system since the rate of convergence for most iterative
linear solvers increases because the condition number of a matrix decreases as a result of preconditioning. Preconditioned
iterative solvers typically outperform direct solvers, e.g., Gaussian elimination, for large, especially for sparse, matrices.</p>
</blockquote>
<h3 id="preconditioners"><a class="header" href="#preconditioners">Preconditioners</a></h3>
<p>Preconditioning is typically related to reducing a condition number of the problem, via the application of a matrix transformation.
The preconditioned problem is then usually solved by an iterative method. There are a range of options for preconditioning matrices:</p>
<ul>
<li><code>DIC/DILU</code>: diagonal incomplete-Cholesky (symmetric) and incomplete-LU (asymmetric)</li>
<li><code>FDIC</code>: faster diagonal incomplete-Cholesky (DIC with caching, symmetric)</li>
<li><code>GAMG</code>: geometric-algebraic multi-grid.</li>
<li><code>diagonal</code>: diagonal preconditioning, not generally used</li>
<li><code>none</code>: no preconditioning.</li>
</ul>
<p>The pressure equation resolution usage is shown:</p>
<pre><code class="language-sh">    p
    {
        solver          PCG;
        preconditioner  DIC;
        tolerance       1e-06;
        relTol          0.05;
    }

    pFinal
    {
        $p;
        relTol          0;
    }
</code></pre>
<h2 id="solver-coupling-equations"><a class="header" href="#solver-coupling-equations">Solver (coupling equations)</a></h2>
<p>Whatever solver you use from above adopt a specific set of sequential algorithm such as semi-implicit
method for pressure-linked equations (SIMPLE), pressure-implicit split-operator (PISO) or PIMPLE.
These sequential algorithms are iterative procedures for coupling equations for momentum and mass conservation,
PISO and PIMPLE being used for transient problems and SIMPLE for steady-state.</p>
<p>All the algorithms solve the same governing equations, they differ in how they loop over the equations.
The looping is controlled by input parameters that are listed below. They are set in a dictionary named after the algorithm:</p>
<ul>
<li>
<p><code>nNonOrthogonalCorrectors</code>: used by all algorithms, specifies repeated
solutions of the pressure equation, used to update the explicit
non-orthogonal correction of the Laplacian term; typically set to 0
(particularly for steady-state) or 1.</p>
</li>
<li>
<p><code>nCorrectors</code>: used by PISO, and PIMPLE, sets the number of times the
algorithm solves the pressure equation and momentum corrector in
each step; typically set to 2 or 3.</p>
</li>
<li>
<p><code>nOuterCorrectors</code>: used by PIMPLE, it enables looping over the entire
system of equations within on time step, representing the total
number of times the system is solved; must be and is typically set
to 1, replicating the PISO algorithm.</p>
</li>
<li>
<p><code>momentumPredictor</code> switch those controls solving of the momentum
predictor; typically set to off for some flows, including low
Reynolds number and multiphase.</p>
</li>
</ul>
<h3 id="simple-solvers-practice"><a class="header" href="#simple-solvers-practice">SIMPLE solvers practice</a></h3>
<p>For the pressure equation:</p>
<pre><code class="language-c++">p
{
    solver GAMG;
    tolerance 1e-6;
    relTol 0.01;
    nPreSweeps 0;
    nPostSweeps 2;
    cacheAgglomeration on;
    agglomerator faceAreaPair;
    nCellsInCoarsestLevel 1000;
    mergeLevels 1;
}
</code></pre>
<p>After a while it should be good practice to lower the relative tollerance to <code>relTol: 0.0</code> to let mamage
the tolerance as an absolute criteria. While for the velocity:</p>
<pre><code class="language-c++">U
{
    solver GAMG;
    smoother &lt;smoother&gt;;
    tolerance 1e-6;
    relTol 0.0;
    nPreSweeps 0;
    nPostSweeps 2;
    cacheAgglomeration on;
    agglomerator faceAreaPair;
    nCellsInCoarsestLevel 1000;
    mergeLevels 1;
}
</code></pre>
<h3 id="piso--pimple-solvers-practice"><a class="header" href="#piso--pimple-solvers-practice">PISO &amp; PIMPLE solvers practice</a></h3>
<p>You must do at least one corrector step when using PISO solvers.
When you use the PISO and PIMPLE solvers, you also have the option to set the
tolerance for the final corrector step (<code>*Final</code>).
By proceeding in this way, you can put all the computational effort only in the last
corrector step (<code>*Final</code>).</p>
<pre><code class="language-c++">p
{
    solver GAMG;
    smoother &lt;smoother&gt;;
    tolerance 1e-04;
    relTol 0.01;
    nPreSweeps 0;
    nPostSweeps 2;
    cacheAgglomeration on;
    agglomerator faceAreaPair;
    nCellsInCoarsestLevel 1000;
    mergeLevels 1;
}

pFinal
{
    solver GAMG;
    smoother &lt;smoother&gt;;
    tolerance 1e-06;
    relTol 0.0;
    nPreSweeps 0;
    nPostSweeps 2;
    cacheAgglomeration on;
    agglomerator faceAreaPair;
    nCellsInCoarsestLevel 1000;
    mergeLevels 1;
}
</code></pre>
<h4 id="addtional-notes"><a class="header" href="#addtional-notes">Addtional notes</a></h4>
<p>Set to yes the momentumPredictor for high Reynolds flows, where convection dominates:</p>
<pre><code class="language-c++"> momentumPredictor yes;
</code></pre>
<p>Recommended value is 1 (equivalent to PISO).
Increase to improve the stability of second
order time discretization schemes (LES
simulations). Increase for strongly coupled
problems.</p>
<pre><code class="language-c++">nOuterCorrectors 1; 
</code></pre>
<p>Recommended to use at least 3 correctors.
It improves accuracy and stability. Use 4 or
more for highly transient flows or strongly
coupled problems.</p>
<pre><code class="language-c++"> nCorrector 3; 
</code></pre>
<p>Recommend to use at least 1 corrector.
Increase the value for bad quality meshes.</p>
<pre><code class="language-c++"> nNonOrthogonalCorrectors 1; 
</code></pre>
<p>The orthogonality correctors must be raised once the mesh starts to be highly orthogonal.</p>
<div class="table-wrapper"><table><thead><tr><th>Non-orthogonality</th><th>between 70 and 85</th><th>between 60 and 70</th><th>less than 60</th></tr></thead><tbody>
<tr><td>nNonOrthogonalCorrectors</td><td>3</td><td>2</td><td>1</td></tr>
</tbody></table>
</div>
<p>Flag to indicate whether to solve the turbulence on the final pimple iteration only. For Scale-Resolving
Simulation (SRS) the recommended value is false (the default is true)</p>
<pre><code class="language-c++"> turbOnFinalIterOnly false; 
</code></pre>
<h2 id="under-relaxation-factors"><a class="header" href="#under-relaxation-factors">Under-relaxation factors</a></h2>
<p>The relaxation factors for under-relaxaing the fields variable are specified within
<code>fvSolution.relaxationFactors.fields</code> sub-dictionary, instead
equation under-relaxations factor are within a <code>fvSolution.relaxationFactors.equations</code> sub-dictionary. </p>
<h3 id="simple"><a class="header" href="#simple">SIMPLE</a></h3>
<p>Usual set of parameters for under-relaxaing the problem using a SIMPLE scheme:</p>
<pre><code class="language-c++">p 0.3;
U 0.7;
k 0.7;
omega 0.7;
</code></pre>
<h3 id="simplec"><a class="header" href="#simplec">SIMPLEC</a></h3>
<p>Usual set of parameters for under-relaxaing the problem using a SIMPLEC scheme:</p>
<pre><code class="language-c++">p 1;
U 0.9;
k 0.9;
omega 0.9;
</code></pre>
<!--  Script to show the footer   -->
<html>
<script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous">
</script>
<script>
$(function(){
  $("#footer").load("../../../footers/footer_third_level_depth.html");
});
</script>
<body>
<div id="footer"></div>
</body>
</html>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../directories_structure/system/fvSchemes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../directories_structure/system/decomposepardict.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../directories_structure/system/fvSchemes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../directories_structure/system/decomposepardict.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../../../ace.js"></script>
        <script src="../../../editor.js"></script>
        <script src="../../../mode-rust.js"></script>
        <script src="../../../theme-dawn.js"></script>
        <script src="../../../theme-tomorrow_night.js"></script>

        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
